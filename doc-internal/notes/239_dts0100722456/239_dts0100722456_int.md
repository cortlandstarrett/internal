---

Copyright 2014 Mentor Graphics Corp.  All Rights Reserved.

---

# Breakpoint still around after removal
### xtUML Project Implementation Note
 

1. Abstract
-----------
The verifier, after terminate and relaunch, still stops at a breakpoint that 
was previously removed from the breakpoint view.


2. Document References
----------------------
[1] Issues 239, https://github.com/xtuml/internal/issues/239  
[2] CQ DEI dts0100722456 - Breakpoint still around after removal  


3. Background
-------------
Stated in the design note

4. Requirements
---------------
4.1 The verifier shall not stop at a breakpoint that is unchecked from the 
   breakpoint view.
   
   
5. Work Required
----------------
Detailed in the design section on the design note 


6. Implementation Comments
--------------------------
6.1 A method removeBreakPoints() is added to BPDebugTarget java class.
    This method does access the InstanceList as follows 
    ...
    
	private void removeBreakPoints(ModelRoot modelRoot) {

		InstanceList breakPointsList = modelRoot
				.getInstanceList(Breakpoint_c.class);

		synchronized (breakPointsList) {
			for (int i = 0; i < breakPointsList.size(); i++) {
				Breakpoint_c breakPoint = (Breakpoint_c) breakPointsList.get(i);
				breakPoint.Dispose();
			}
		}

	}
	....
	
6.2 During code review there was a concern for using the synchronized keyword 
    That it may cause troubles and seeking consultancy was requested 

6.3 After discussing it further with Campbell it was agreed it's ok to use the synchronized 
    keyword because  the instance list is shared storage. 
    Everywhere else we use synchronized with it.  
    He doesn't think it will cause any trouble.
    We use it everywhere for instance lists to prevent concurrent modification exceptions.
    
    
6.4 GPS model is added to the models tests for testing this issue     
    

7. Unit Test
------------
7.1 Run Verifier test suite.  

8. Code Changes
---------------
Branch name: <[internal] 239_dts0100722456_2 >

<pre>
com.mentor.nucleus.bp.debug.ui [internal 239_dts0100722456_2]/src/com/mentor/
    nucleus/bp/debug/ui/model/BPDebugTarget.java

com.mentor.nucleus.bp.debug.ui.test [internal 239_dts0100722456_2]/src/
    VerifierTestSuite.java
com.mentor.nucleus.bp.debug.ui.test [internal 239_dts0100722456_2]/src/com/
    mentor/nucleus/bp/debug/test/VerifierUDTAsUDTInitializationTests.java
com.mentor.nucleus.bp.debug.ui.test [internal 239_dts0100722456_2]/src/com/
    mentor/nucleus/bp/debug/test/breakpoint/BreakpointRemovalTest.java

</pre>

Branch name: <[models] 239_dts0100722456_2 >

<pre>
GPS Watch [models 239_dts0100722456_2]/.externalToolBuilders/
    Model Compiler.launch
GPS Watch [models 239_dts0100722456_2]/.launches/GPS Watch.launch
GPS Watch [models 239_dts0100722456_2]/.launches/GPS Watch UI.launch
GPS Watch [models 239_dts0100722456_2]/.launches/
    GPS Watch With Initializer.launch
GPS Watch [models 239_dts0100722456_2]/.settings/
    org.eclipse.cdt.managedbuilder.core.prefs
GPS Watch [models 239_dts0100722456_2]/bin/lib/GuiBridge.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/GuiBridge$GuiConnection.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/SetData.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/SetTime.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/SignalData.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/WatchGui.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/WatchGui$1.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/WatchGui$2.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/WatchGui$3.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/WatchGui$4.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/WatchGui$5.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/
    WatchGui$ApplicationConnection.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/
    WatchGui$ApplicationConnection$1.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/
    WatchGui$ApplicationConnection$2.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/WatchGui$ButtonListener.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/WatchGui$ConnectionHandler.class
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/0_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/0_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/1_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/1_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/2_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/2_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/3_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/3_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/4_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/4_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/5_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/5_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/6_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/6_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/7_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/7_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/8_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/8_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/9_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/9_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/app_icon.gif
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/display_hover.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/display_pressed.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/dots_large.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/dots_small.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/lap_reset_hover.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/lap_reset_pressed.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/light_hover.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/light_pressed.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/mode_hover.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/mode_pressed.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/start_stop_hover.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/start_stop_pressed.png
GPS Watch [models 239_dts0100722456_2]/bin/lib/img/watch.png
GPS Watch [models 239_dts0100722456_2]/Debug/GPSWatch.exe
GPS Watch [models 239_dts0100722456_2]/gen/class.mark
GPS Watch [models 239_dts0100722456_2]/gen/datatype.mark
GPS Watch [models 239_dts0100722456_2]/gen/domain.mark
GPS Watch [models 239_dts0100722456_2]/gen/system.mark
GPS Watch [models 239_dts0100722456_2]/gen/UI_GuiBridge_bridge.c
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/GuiBridge.java
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/SetData.java
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/SetTime.java
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/SignalData.java
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/WatchGui.java
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/0_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/0_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/1_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/1_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/2_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/2_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/3_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/3_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/4_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/4_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/5_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/5_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/6_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/6_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/7_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/7_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/8_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/8_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/9_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/9_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/app_icon.gif
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/display_hover.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/display_pressed.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/dots_large.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/dots_small.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/lap_reset_hover.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/lap_reset_pressed.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/light_hover.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/light_pressed.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/mode_hover.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/mode_pressed.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/start_stop_hover.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/start_stop_pressed.png
GPS Watch [models 239_dts0100722456_2]/javasrc/lib/img/watch.png
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/GPS Watch.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Activities/
    Activities.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Activities/Exercise/
    Exercise.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Analysis/Analysis.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Analysis/
    Start Stop Reset/Start Stop Reset.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/
    HeartRateMonitorInterfaces/HeartRateMonitorInterfaces.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/
    HeartRateMonitorInterfaces/HeartRateProvider/HeartRateProvider.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Library.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/
    HeartRateMonitor/HeartRateMonitor.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/
    HeartRateMonitor/HeartRateMonitor/HeartRateMonitor.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/
    HeartRateMonitor/HeartRateMonitor/HeartRateMonitor/HeartRateMonitor.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/
    HeartRateMonitor/HeartRateMonitor/HeartRateMonitor/ClassStateMachine/
    ClassStateMachine.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Location/
    Location.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Location/
    Location/Location.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Location/
    Location/GPS/GPS.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Location/
    Location/GPS/ClassStateMachine/ClassStateMachine.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking/Tracking.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking/Display/Display.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking/Display/ClassStateMachine/ClassStateMachine.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking/HeartRateSample/HeartRateSample.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking/LapMarker/LapMarker.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking/TrackLog/TrackLog.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking/TrackPoint/TrackPoint.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking/WorkoutTimer/WorkoutTimer.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/Tracking/
    Tracking/WorkoutTimer/InstanceStateMachine/InstanceStateMachine.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/UI/UI.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/UI/
    External Entities/External Entities.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/UI/Functions/
    Functions.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/UI/TestCases/
    TestCases.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/UI/UI/UI.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/UI/UI/TestCase/
    TestCase.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/UI/UI/TestCase/
    InstanceStateMachine/InstanceStateMachine.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/UI/UI/UI/
    UI.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Library/UI/UI/UI/
    ClassStateMachine/ClassStateMachine.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/LocationDataTypes/
    LocationDataTypes.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/LocationInterfaces/
    LocationInterfaces.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/LocationInterfaces/
    LocationProvider/LocationProvider.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/LocationInterfaces/
    LocationUtil/LocationUtil.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Sequences/
    Sequences.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Sequences/Backlight/
    Backlight.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Sequences/
    Start Stop Reset Formalized/Start Stop Reset Formalized.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Sequences/Stopwatch/
    Stopwatch.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Shared EEs/
    Shared EEs.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/System/System.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/UIDataTypes/
    UIDataTypes.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/UIInterfaces/
    UIInterfaces.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/UIInterfaces/UI/UI.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Use Cases/
    Use Cases.xtuml
GPS Watch [models 239_dts0100722456_2]/models/GPS Watch/Use Cases/Record Info/
    Record Info.xtuml
GPS Watch [models 239_dts0100722456_2]/src/GPSWatch_sys_main.c
GPS Watch [models 239_dts0100722456_2]/src/GPSWatch_sys_types.h
GPS Watch [models 239_dts0100722456_2]/src/HeartRateMonitor_classes.h
GPS Watch [models 239_dts0100722456_2]/src/
    HeartRateMonitor_HeartRateMonitor_class.c
GPS Watch [models 239_dts0100722456_2]/src/
    HeartRateMonitor_HeartRateMonitor_class.h
GPS Watch [models 239_dts0100722456_2]/src/HeartRateMonitor.c
GPS Watch [models 239_dts0100722456_2]/src/HeartRateMonitor.h
GPS Watch [models 239_dts0100722456_2]/src/Location_classes.h
GPS Watch [models 239_dts0100722456_2]/src/Location_GPS_class.c
GPS Watch [models 239_dts0100722456_2]/src/Location_GPS_class.h
GPS Watch [models 239_dts0100722456_2]/src/Location.c
GPS Watch [models 239_dts0100722456_2]/src/Location.h
GPS Watch [models 239_dts0100722456_2]/src/LOG_bridge.c
GPS Watch [models 239_dts0100722456_2]/src/LOG_bridge.h
GPS Watch [models 239_dts0100722456_2]/src/sys_user_co.c
GPS Watch [models 239_dts0100722456_2]/src/sys_user_co.h
GPS Watch [models 239_dts0100722456_2]/src/sys_xtuml.c
GPS Watch [models 239_dts0100722456_2]/src/sys_xtuml.h
GPS Watch [models 239_dts0100722456_2]/src/TIM_bridge.c
GPS Watch [models 239_dts0100722456_2]/src/TIM_bridge.h
GPS Watch [models 239_dts0100722456_2]/src/Tracking_classes.h
GPS Watch [models 239_dts0100722456_2]/src/Tracking_Display_class.c
GPS Watch [models 239_dts0100722456_2]/src/Tracking_Display_class.h
GPS Watch [models 239_dts0100722456_2]/src/Tracking_HeartRateSample_class.c
GPS Watch [models 239_dts0100722456_2]/src/Tracking_HeartRateSample_class.h
GPS Watch [models 239_dts0100722456_2]/src/Tracking_LapMarker_class.c
GPS Watch [models 239_dts0100722456_2]/src/Tracking_LapMarker_class.h
GPS Watch [models 239_dts0100722456_2]/src/Tracking_TrackLog_class.c
GPS Watch [models 239_dts0100722456_2]/src/Tracking_TrackLog_class.h
GPS Watch [models 239_dts0100722456_2]/src/Tracking_TrackPoint_class.c
GPS Watch [models 239_dts0100722456_2]/src/Tracking_TrackPoint_class.h
GPS Watch [models 239_dts0100722456_2]/src/Tracking_WorkoutTimer_class.c
GPS Watch [models 239_dts0100722456_2]/src/Tracking_WorkoutTimer_class.h
GPS Watch [models 239_dts0100722456_2]/src/Tracking.c
GPS Watch [models 239_dts0100722456_2]/src/Tracking.h
GPS Watch [models 239_dts0100722456_2]/src/UI_classes.h
GPS Watch [models 239_dts0100722456_2]/src/UI_GuiBridge_bridge.c
GPS Watch [models 239_dts0100722456_2]/src/UI_GuiBridge_bridge.h
GPS Watch [models 239_dts0100722456_2]/src/UI_TestCase_class.c
GPS Watch [models 239_dts0100722456_2]/src/UI_TestCase_class.h
GPS Watch [models 239_dts0100722456_2]/src/UI_UI_class.c
GPS Watch [models 239_dts0100722456_2]/src/UI_UI_class.h
GPS Watch [models 239_dts0100722456_2]/src/UI.c
GPS Watch [models 239_dts0100722456_2]/src/UI.h
GPS Watch [models 239_dts0100722456_2]/.classpath
GPS Watch [models 239_dts0100722456_2]/.cproject
GPS Watch [models 239_dts0100722456_2]/.gitignore
GPS Watch [models 239_dts0100722456_2]/.project
GPS Watch [models 239_dts0100722456_2]/README


</pre>


End
---

