
# How to create a new Model Compiler Plug-in
### BridgePoint Technical Note

Abstract
--------
An Eclipse plugin creation template was created to make generating new plugins
(and recreating existing plugins) trivial.  This document describes how to use 
this template to create a new BridgePoint Model Compiler plugin

Note that in the example below, the name com.mentor.nucleus.bp.mc.* is used to 
create new plugins.  This convention was used to create all the BridgePoint 
model compilers.  While the generated MCs could be recreated doing so may not be 
a good idea.  The reason is that some mcs have been specialized after 
initial generation.  For example, bp.mcpass, and bp.mc.none.  Therefore, if a
change is made that effects all MCs it may be best to modify the existing MCs
rather than regenerate them.

Document References
-------------------
[1] ClearQuest DEI dts0100782785
    BridgePoint does not support multiple versions of model compiler  
[2] ClearQuest DEI dts0100845396
    Remove references to 3020 from the Model Compilers generated by 
    bp.mc.template  


Procedure
---------
- Open Java perspective
- From the Package Explorer View
- New > Project...
- Select Plug-in Project then click Next
- Add a project name.  ```Example: com.mentor.nucleus.bp.mc.<new-mc-name>```
- Select Next
- Enter the correct Version and Provider
- Default options to "Generate an activator" and "This plug-in will make 
   contributions to the UI" should remain checked.
- Select Next
- Select the BridgePoint Model Compiler Wizard from the list of templates
- Answer the questions (Enter the name of the new MC)
- Select Finish
- __R__ New MC is created
- Select the Build tab in the Manifest editor
- Right click on the library that is named '.'
- Select Rename and enter a meaningful name (< some name >.jar)
- Under the Binary Build section check the following:
  - build_settings
  - defaults
  - log_dir
  - mc3020
- Under the Source Build section check the following:
  - META-INF
  - build_settings
  - defaults
  - log_dir
  - mc3020
  - plugin.xml
  - src
- Open the Runtime tab and click the Add... button under the Exported Packages
  section
- Select the all the packages listed
- Under the Classpath section click the New... button
- Enter the name of the renamed jar from above
- Save the changes
- Check the new MC into source control
- __R__ Done with model compiler creation.


The following steps describe changes that need to be made to the
builder server scripts to introduce the new plugin.
- The following build server scripts  must be updated include the new
  so that the new plugins are properly tagged and included with the 
  BridgePoint distribution:  < git >/xtuml/internal/utilities/build/create_release_functions.sh
- Modify the following build server script to properly populate the 
  new plugin's "mc3020" folder.  Note that when issue called out by [2] is
  resolved this "mc3020" folder may no longer be used by the new MCs, but at
  this time it is.
  - < git >/xtuml/internal/utilities/build/configure_external_dependencies.sh
- Update the Linux installer to support the new Model compiler plug-ins.
  The BridgePoint Linux installer has a post-installation step that moves
  binaries needed for xtumlmc_build.exe execution via wine into the plug-in
  folder and makes them executable.  This step must be repeated for each of 
  the new model compiler plug-ins.   