========================================================================

File:      $RCSfile: i236.int,v $
Version:   $Revision: 1.1 $
Modified:  $Date: 2009/09/03 18:20:34 $

(c) Copyright 2004-2009 by Mentor Graphics Corp. All rights reserved.

========================================================================
This document contains information proprietary and confidential to
Mentor Graphics Corp., and is not for external distribution.
========================================================================

MC-Java Implementation Note
Schema file generation fix

Abstract
--------

This note describes the fix for generating a schema file when
there are no identifying unique_id attributes.

History
-------

update i236-061604-01.rvm
final i236-061704-01.rvm

Document References
-------------------

Issue 236

Background
----------

The schema file generated by MC-Java when persistence is enabled has a syntax
error if there no identifying attributes with the type unique_id in the model.
Attributes with user defined types are not handled either.

Design
------

i236.1  Change schema generation to check id assigner count

A test is added to the schema generation to check the number of
id assigners defined by the model.  If the number is zero, then
the id assigner table, and it's population are not output.
If there aren't any id assigners in the model, then we don't
need the id assigner table.

i236.2  Handle user defined types

A check for user defined types is added. If the attribute
has a user defined type, then the core data type is used instead.

Work Required
-------------

i236.1  Change schema generation to check id assigner count

In pg_schema_gen.arc, only generate the id assigner table CREATE
and INSERT statements if num_id_assigners is greater than zero.

i236.2  Handle user defined types

The change is made to pg_schema_gen.arc as described in the design.

Implementation Comments
-----------------------

- A redundant test for the data type being state<State_Model>
was removed.

- Logic was added to generically ignore attributes that meet
any criteria.  The attributes with type inst_ref<Timer> were
added as ones to ignore.

Unit Test
---------

- Rebuild tiger and compile.
R Tiger rebuilds and compiles without any errors.
- Build elevator with persistence enabled
R Elevator builds and compiles without any errors.
R The schema file does not have an id assigner table CREATE or INSERT statement.

Code Changes
------------

MC-Java/pg_schema_gen.arc
Initial Version:  1.2  Final Version:  1.3

End
---
$Log: i236.int,v $
Revision 1.1  2009/09/03 18:20:34  rmulvey
job:dts0100616734
Archive documentation and other development notes following the R3_0_0 release.  These are being archived under Documentation/internal/technical/archive/20090903

Revision 1.6  2009/01/01 23:13:16  rmulvey
Job:4060
Batch promotion of copyright changes from Review-i4060 and Review-i4060-01.

Revision 1.5.162.1  2008/12/31 16:10:24  rmulvey
Job:4060
This is a batch commit of 2009 copyright changes to branch Review-i4060.  This includes the
report that outlines all changes made (before/after for each line changed).  This report is found here: <cvs>/Documentation/internal/test_results/R2_1_2/i4060/update-copyright-results.txt.

Revision 1.5  2004/06/17 19:10:33  greg
Job: 236
Update history

Revision 1.4  2004/06/17 19:09:42  greg
Job: 236
Fix typo

Revision 1.3  2004/06/16 22:05:20  greg
Job: 236
Changes from review

Revision 1.2  2004/06/16 15:29:21  greg
Job: 236
UDT's made part of work.

Revision 1.1  2004/06/16 15:24:27  greg
Job: 236
Initial introduction


