========================================================================

File:      $RCSfile: i1754-1755-1756.int,v $
Version:   $Revision: 1.1 $
Modified:  $Date: 2009/09/03 18:22:27 $

(c) Copyright 2005-2009 by Mentor Graphics Corp. All rights reserved.

========================================================================
This document contains information proprietary and confidential to
Mentor Graphics Corp., and is not for external distribution.
========================================================================

Tiger Implementation Note
Refactor Persistence and Proxy policy

Document References
-------------------
[1] Documentation/internal/technical/Persistence/i1757.tnt
[2] Documentation/internal/technical/Persistence/i845-PLCM_1_0.ant
[3] BZ Issue 1754
[4] BZ Issue 1755
[5] BZ Issue 1756
[6] Documentation/internal/technical/Persistence/i1754-1755-1756.dnt
[7] Documentation/internal/technical/Persistence/i845-i64-UT.int
[8] Documentation/internal/technical/Persistence/i845-i65-UT.int
[9] Documentation/internal/technical/Persistence/i845-i72-UT.int

Implementation comments
------

1.   File_io.pei.sql changes
1.1  WritePosition of SubsystemInDomian instance under domain is marked as none.
1.2  SubsystemInDomian instance was added under the subsystem.
1.3  Relation number of SubsystemInSubsystem with subsystem was changed so it
     may store along with child side component.
1.4  'External Entity Data Item' was added into the pei file.

2.   MetaModel changes
2.1  Association number 18 marked as CrossComponent.

3.   Allow change of New Domain Wizard preferences.
3.1  In domain creation wizard page user selection is retained. In unit tests we
     need to create domains without any template, so to change preferences a
     method setUseTemplate(boolean) was added in the class
     WizardNewDomainCreationPage for this purpose.

4.   Proxy path calculation   
4.1  createRelativePath and resolveRelativePath Methods in PersistenceUtil was
     changed to create valid path even if project does not exist directly under
     the WS folder.
     
5.   Core/generate.xml changes
5.1  target schema was updated to import file_io schema also.
   
6.   Persistable Model Component changes.
6.1  A status variable was added into the PMC class to keep track of its status.
     Following methods were removed from PMC.
      ensureInstancesLoaded
      ensureAllInstancesAvailable
      ensureAvailable
      ensureParentAvailable
      findRootComponentInstances
      findInstance
    
7.   PersistenceManager changes.        
7.1  TreeMap was used to keep instances of PMCs.
7.2  traverseResourceContainer was changed to traverse all folders.
     Following methods were added to the PersistencManager.
      addComponent
      removeComponent
      findComponent
      findAllComponent
      findAllChildComponent
      ensureAllInstancesLoaded
      findAllChildComponents

8.   Lazy Loading
8.1  An archetype function isCrossComponentAssociation was added to determine
     that given Association is cross component.
     A build target file_io_sql was added to the MC-Java/build.xml to import
     file_io schema and pei file.
    
9.   Disabling lazy loading
9.1  setGraphicsRepresent was removed from ExpoertComponent to avoid unnecessary
     loading of the components.
       
10.  Unit tests Updating
     create_context_menu_tests.arc, gen_formalizer_tests.arc were updated to use
     some particular model element, it no more depends on the loading order.

11.  SystemModel proxy special case
     A special case was added in ImportModelComponent.finishComponentLoad(),
     generated by gen_import_java.inc to remove SystemModel proxy when another
     parent SystemModel already exists.
     This was particulary required for the unit tests in which test SystemModel
     may have different id than imported Domain.
      
Unit Test
---------
Completed implementation of 1605(Rename) see Document reference [7].
Completed implementation of 1606(Modify) see Document reference [8].
Completed implementation of 1612(Restore Create) see Document reference [9].
Completed implementation of 1614(Restore Modify) see Document reference [8].

_-Run all unit tests
R-All test pass.

Code changes
------------
Regenerated model files.
com.mentor.nucleus.bp.compare.test/models/com.mentor.nucleus.bp.compare.test/*
com.mentor.nucleus.bp.als/models/com.mentor.nucleus.bp.als/*
com.mentor.nucleus.bp.core/models/com.mentor.nucleus.bp.core/*
com.mentor.nucleus.bp.core.test/models/com.mentor.nucleus.bp.core.test/*
com.mentor.nucleus.bp.io.core/models/com.mentor.nucleus.bp.io.core/*
com.mentor.nucleus.bp.io.mdl.test/models/com.mentor.nucleus.bp.io.mdl.test/*
com.mentor.nucleus.bp.ui.canvas/models/com.mentor.nucleus.bp.ui.canvas/*
com.mentor.nucleus.bp.ui.canvas.test/models/com.mentor.nucleus.bp.ui.canvas.
test/*
com.mentor.nucleus.bp.ui.explorer/models/com.mentor.nucleus.bp.ui.explorer/*
com.mentor.nucleus.bp.ui.explorer.test/models/com.mentor.nucleus.bp.ui.explorer.
test/*
com.mentor.nucleus.bp.ui.properties.test/models/com.mentor.nucleus.bp.ui.
properties.test/*
com.mentor.nucleus.bp.ui.text.test/models/com.mentor.nucleus.bp.ui.text.test/*
com.mentor.nucleus.bp.welcome/models/com.mentor.nucleus.bp.welcome/*
Models/models/Models/*

Expected results regenerated.
com.mentor.nucleus.bp.io.mdl.test/expected_results/test*
com.mentor.nucleus.bp.ui.canvas.test/expected_results/OOAofOOA/1048578-5
com.mentor.nucleus.bp.ui.canvas.test/expected_results/OOAofOOA/1048578-5.jpg

Code changed.
com.mentor.nucleus.bp.compare.test src/com/mentor/nucleus/bp/compare/test/cases
      I495HierarcyComparisonTest.java
com.mentor.nucleus.bp.core/color/ooaofooa_package_spec.clr
com.mentor.nucleus.bp.core/models/ooaofooa.xtuml
com.mentor.nucleus.bp.core/sql/.cvsignore
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/EclipseOoaofooa.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/OoaofooaBase.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/common/
    ComponentResourceListener.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/common/
    ComponentTransactionListener.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/common/IdAssigner.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/common/
    NonRootModelElement.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/common/
    PersistableModelComponent.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/common/
    PersistenceManager.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/common/
    TransactionManager.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/ui/
    WizardNewDomainCreationPage.java
com.mentor.nucleus.bp.core/src/com/mentor/nucleus/bp/core/util/
    PersistenceUtil.java
com.mentor.nucleus.bp.core/generate.xml

com.mentor.nucleus.bp.core.test/arc/create_context_menu_tests.arc
com.mentor.nucleus.bp.core.test/arc/gen_Formalize_tests.arc
com.mentor.nucleus.bp.core.test/src/com/mentor/nucleus/bp/core/test/
    MultipleReload.java
com.mentor.nucleus.bp.core.test/src/com/mentor/nucleus/bp/core/test/
    TigerNatureTest.java

com.mentor.nucleus.bp.core.test/src/com/mentor/nucleus/bp/core/test/
    UndoRedoTest.java
    
com.mentor.nucleus.bp.io.core/arc/gen_export_java.inc
com.mentor.nucleus.bp.io.core/arc/gen_import_java.inc
com.mentor.nucleus.bp.io.core/src/com/mentor/nucleus/bp/io/core
    CoreImport.java
    
com.mentor.nucleus.bp.io.mdl/arc/create_persistence_meta_data.arc
com.mentor.nucleus.bp.io.mdl/sql/file_io.pei.sql
com.mentor.nucleus.bp.io.mdl/src/com/mentor/nucleus/bp/io/mdl/
    ConvertToMultifileWizard.java

com.mentor.nucleus.bp.io.mdl.test/models/MultiLevelModel.xtuml
com.mentor.nucleus.bp.io.mdl.test/models/MultiLevelModel2.xtuml
com.mentor.nucleus.bp.io.mdl.test/src/PkgCmResultsTestSuite.java
com.mentor.nucleus.bp.io.mdl.test/src/PkgCMTestSuite.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/
    IOMdlNestedTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/
    MultiFileModelTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    CreateTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    EditorTestUtilities.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    FileVsFolder_i1608Test.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    ModifyContentsTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    PkgCMBaseTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    PkgCMCreateTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    PkgCMModifyContentsTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    PkgCMRenameTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    RenameTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    restore/PkgCMRestoreCreateTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    restore/PkgCMRestoreModifyContentsTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    restore/PkgCMRestoreRenameTest.java
com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/
    restore/PkgCMRestoreTestSuite.java
com.mentor.nucleus.bp.io.mdl.test/Test_Readme.txt

com.mentor.nucleus.bp.test/src/com/mentor/nucleus/bp/test/common/BaseTest.java
com.mentor.nucleus.bp.test/src/com/mentor/nucleus/bp/test/common/
    TestingUtilities.java
com.mentor.nucleus.bp.test/src/com/mentor/nucleus/bp/test/common/
    CanvasEditorUtils.java
com.mentor.nucleus.bp.test/src/com/mentor/nucleus/bp/test/common/
    CanvasTestUtils.java
com.mentor.nucleus.bp.test/src/com/mentor/nucleus/bp/test/common/
    ExplorerUtil.java
    
com.mentor.nucleus.bp.ui.canvas/src/com/mentor/nucleus/bp/ui/canvas/
    CanvasEditor.java
com.mentor.nucleus.bp.ui.canvas/src/com/mentor/nucleus/bp/ui/canvas/
    CanvasEditorInput.java
com.mentor.nucleus.bp.ui.canvas/src/com/mentor/nucleus/bp/ui/canvas/
    CanvasFactory.java

com.mentor.nucleus.bp.ui.canvas.test/models/ooaofooa.xtuml
com.mentor.nucleus.bp.ui.canvas.test/src/com/mentor/nucleus/bp/ui/canvas/test/
    CanvasCreationTest.java
com.mentor.nucleus.bp.ui.canvas.test/src/com/mentor/nucleus/bp/ui/canvas/test/
    CanvasEditorReloadContentsTest.java
com.mentor.nucleus.bp.ui.canvas.test/src/com/mentor/nucleus/bp/ui/canvas/test/
    CanvasTest.java
com.mentor.nucleus.bp.ui.canvas.test/src/com/mentor/nucleus/bp/ui/canvas/test/
    CanvasTestUtilities.java   (file was removed)

com.mentor.nucleus.bp.ui.explorer/arc/create_explorer_view.inc

com.mentor.nucleus.bp.ui.properties.test/
     create_view_test.arc
     
com.mentor.nucleus.bp.ui.text/arc/create_modeladapter_java.arc
com.mentor.nucleus.bp.ui.text/src/com/mentor/nucleus/bp/ui/text/placeholder/
    PlaceHolderManager.java

com.mentor.nucleus.bp.ui.text.test/src/com/mentor/nucleus/bp/ui/text/test/activity
     ProcessAllActivitiesTest.java
com.mentor.nucleus.bp.ui.text.test/src/com/mentor/nucleus/bp/ui/text/test/i589Test
     ElementDeleteTest.java

MC-Java/arch_utils.inc
MC-Java/build.xml
MC-Java/java.arc
MC-Java/model_consistency.inc
MC-Java/referred_to.inc
MC-Java/referring.inc

End
---
$Log: i1754-1755-1756.int,v $
Revision 1.1  2009/09/03 18:22:27  rmulvey
job:dts0100616734
Archive documentation and other development notes following the R3_0_0 release.  These are being archived under Documentation/internal/technical/archive/20090903

Revision 1.6  2009/01/01 23:13:08  rmulvey
Job:4060
Batch promotion of copyright changes from Review-i4060 and Review-i4060-01.

Revision 1.5.16.1  2008/12/31 16:10:12  rmulvey
Job:4060
This is a batch commit of 2009 copyright changes to branch Review-i4060.  This includes the
report that outlines all changes made (before/after for each line changed).  This report is found here: <cvs>/Documentation/internal/test_results/R2_1_2/i4060/update-copyright-results.txt.

Revision 1.5  2006/05/13 15:20:28  rmulvey
Job:1754
I added a few file that were modified but not in the code changes section:
com.mentor.nucleus.bp.compare.test src/com/mentor/nucleus/bp/compare/test/cases
      I495HierarcyComparisonTest.java

com.mentor.nucleus.bp.core.test/src/com/mentor/nucleus/bp/core/test/
    UndoRedoTest.java

com.mentor.nucleus.bp.io.core/src/com/mentor/nucleus/bp/io/core
    CoreImport.java
 com.mentor.nucleus.bp.io.mdl.test/src/com/mentor/nucleus/bp/io/mdl/test/pkgcm/restore/PkgCMRestoreRenameTest.java

com.mentor.nucleus.bp.test/src/com/mentor/nucleus/bp/test/common/
    CanvasEditorUtils.java
com.mentor.nucleus.bp.test/src/com/mentor/nucleus/bp/test/common/
    CanvasTestUtils.java
com.mentor.nucleus.bp.test/src/com/mentor/nucleus/bp/test/common/
    ExplorerUtil.java

com.mentor.nucleus.bp.ui.canvas.test/src/com/mentor/nucleus/bp/ui/canvas/test/
    CanvasTestUtilities.java  (file was deleted)

com.mentor.nucleus.bp.ui.properties.test/
     create_view_test.arc
 com.mentor.nucleus.bp.ui.text.test/src/com/mentor/nucleus/bp/ui/text/test/activity
     ProcessAllActivitiesTest.java
 com.mentor.nucleus.bp.ui.text.test/src/com/mentor/nucleus/bp/ui/text/test/i589Test
     ElementDeleteTest.java

Revision 1.4  2006/05/12 13:50:48  araza
job:1754
Add changed files.

Revision 1.3  2006/05/11 13:50:08  araza
job:1754
TYPOs, Added code changes enteries.

Revision 1.2  2006/05/07 15:21:18  araza
Job:1754
Added actuall comments.

Revision 1.1  2006/05/05 12:33:46  araza
Job:1754
Introduced.
Copied from dnt.

