========================================================================

File:      $RCSfile: i165.int,v $
Version:   $Revision: 1.1 $
Modified:  $Date: 2009/09/03 18:28:17 $

(c) Copyright 2004-2009 by Mentor Graphics Corp. All rights reserved.

========================================================================
This document contains information proprietary and confidential to
Mentor Graphics Corp. and is not for external distribution.
========================================================================

Tiger Implementation Note
Add check for log file entries to tests

Abstract
--------
This note describes the changes to the automated tests to check that there
are no log entries on completion of the tests.

History
-------

final i165-082004-01.rvm

Document References
-------------------

Bugzilla issue 165

Background
----------

The tests which use the Eclipse workspace (currently Core, Canvas, and 
UIText) do not check for any entries in the log file.  This allows errors
(such as a can't happen) to occur without being detected.

Design
------

The log file is located in <workspace>/.metadata/.log.  Each test suite is
changed to check for the existence of the file.  The file only exists if
there are entries in the log.

i165.1  Add log file definition

Since the workspace path is different for each test, the property
LOGFILE_PATH is added to the test's execution profile.  

i165.2   Update Canvas test

The base class, CanvasTest, is changed to add the log file testing. 
The setUp() function is changed to cache the value of the LOGFILE_PATH property
in the private static member m_logfile_path.  The tearDown() function is changed
to test if the file m_logfile_path exists.  If it does, the test fails.

i165.3   Update Core test

A base class, CoreTest (derived from TestCase), is added that 
performs the log file testing similar to that described in i165.2.  All other 
classes that used to be derived from TestCase are now derived from CoreTest
(these classes are generated by archetype files).  

i165.4   Update UIText test

A base class, UITextTest (derived from TestCase), is added that 
performs the log file testing similar to that described in i165.2.  All other 
classes that used to be derived from TestCase are now derived from UITextTest.

i165.5  Fix errors

In order for all tests to pass after this work,  we must fix the errors
in Canvas and UIText.

i165.5.1  Canvas error

There is a can't happen that occurs in the Canvas test:

Can't Happen:  Connector Tool state = 5 event = CT_CTL3:Mouse Down

This error is generated by test34DeactivateInDraggingFirstSegment().
The mouseDown call in this test is erroneous, since the mouse is left in the 
down state from the previous test.  The call to 
CanvasTestUtilities.createMouseEvent() for the mouseDown is removed.

i165.5.2  UIText errors

i165.5.2.1  The AllActivityModifier class collects instances of O_DBATTR
for mda's.  The Activity Editor expects an O_ATTR instance.  The 
AllActivityModifier class is changed to collect O_ATTR instances that have
O_DBATTR subtypes.  The parsing code is also changed to navigate from the 
O_ATTR to the O_DBATTR to get the activity's statements.

i165.5.2.2  Once this error is corrected, then the import code fails to 
parse because an MDA contains a raw relocatable.  The relocatable is changed
to pure OAL, and the file is renamed to testDescrip1.sql.  This is the only
relocatable in the file.

Work Required
-------------

i165.1  Add log file definition

The Test_Readme.txt files for Core, Canvas, and UIText tests are updated with
instructions for creating the new property.

i165.2   Update Canvas test

The changes are made as described in the design.

i165.3   Update Core test

The changes are made as described in the design.

i165.4   Update UIText test

The changes are made as described in the design.

i165.5  Fix errors

i165.5.1  Canvas error

The change is made to CanvasEditorInteraction.java.

i165.5.2  UIText errors

i165.5.2.1  The changes are made to AllActivityModifier.java as described 
in the design.

i165.5.2.2  The changes are made as described in the design.


Implementation Comments
-----------------------

- Test case classes with definitions of constructors, setUp, or tearDown 
functions that did nothing but call the super implementation had those 
implementations removed.

Unit Test
---------

- Rebuild all
R All rebuild without error
- Run Core test
R Test passes
- Run Canvas test
R Test passes
- Run UIText test
R Test passes

Code changes
------------

com.projtech.bp.core.test/arc/create_action_test.arc
Initial version:  1.5   Final version: 1.6

com.projtech.bp.core.test/arc/create_dispose_test.arc
Initial version:  1.8   Final version: 1.9

com.projtech.bp.core.test/src/com/projtech/bp/core/test/CoreTest.java
Introduced version:     1.1

com.projtech.bp.core.test/Test_Readme.txt
Initial version:   1.1   Final version: 1.2

com.projtech.bp.ui.canvas.test/src/com/projtech/bp/ui/canvas/test/CanvasEditorInteraction.java
Initial version:   1.6   Final version: 1.7

com.projtech.bp.ui.canvas.test/src/com/projtech/bp/ui/canvas/test/CanvasTest.java
Initial version:   1.16  Final version: 1.17

com.projtech.bp.ui.canvas.test/Test_Readme.txt
Initial version:   1.5   Final version: 1.7

com.projtech.bp.ui.text/src/com/projtech/bp/ui/text/activity/AllActivityModifier.java
Initial version:   1.4   Final version: 1.5

com.projtech.bp.ui.text.test/mdl/testDescrip1.bak
Deleted version:     1.5

com.projtech.bp.ui.text.test/mdl/testDescrip1.sql
Introduced version:     1.1

com.projtech.bp.ui.text.test/src/com/projtech/bp/ui/text/test/UITextTest.java
Introduced version:     1.1

com.projtech.bp.ui.text.test/src/com/projtech/bp/ui/text/test/activity/ActivityEditorInteraction.java
Initial version:   1.8  Final version: 1.9

com.projtech.bp.ui.text.test/src/com/projtech/bp/ui/text/test/activity/CloseActivityEditor.java
Initial version:   1.4  Final version: 1.5

com.projtech.bp.ui.text.test/src/com/projtech/bp/ui/text/test/activity/OpenActivityEditor.java
Initial version:   1.5  Final version: 1.6

com.projtech.bp.ui.text.test/src/com/projtech/bp/ui/text/test/activity/ParseActivity.java
Initial version:   1.7  Final version: 1.8

com.projtech.bp.ui.text.test/src/com/projtech/bp/ui/text/test/description/CloseDescriptionEditor.java
Initial version:   1.4  Final version: 1.5

com.projtech.bp.ui.text.test/src/com/projtech/bp/ui/text/test/description/DescriptionEditorInteraction.java
Initial version:   1.4  Final version: 1.5

com.projtech.bp.ui.text.test/src/com/projtech/bp/ui/text/test/description/OpenDescriptionEditor.java
Initial version:   1.6  Final version: 1.8

com.projtech.bp.ui.text.test/test_setup.txt
Initial version:   1.4   Final version: 1.6

End
---

$Log: i165.int,v $
Revision 1.1  2009/09/03 18:28:17  rmulvey
job:dts0100616734
Archive documentation and other development notes following the R3_0_0 release.  These are being archived under Documentation/internal/technical/archive/20090903

Revision 1.5  2009/01/01 23:13:39  rmulvey
Job:4060
Batch promotion of copyright changes from Review-i4060 and Review-i4060-01.

Revision 1.4.152.1  2008/12/31 16:10:53  rmulvey
Job:4060
This is a batch commit of 2009 copyright changes to branch Review-i4060.  This includes the
report that outlines all changes made (before/after for each line changed).  This report is found here: <cvs>/Documentation/internal/test_results/R2_1_2/i4060/update-copyright-results.txt.

Revision 1.4  2004/08/23 17:50:17  tlondon
Job: 165

Fixed file version for CloseActivityEditor.java

Revision 1.3  2004/08/20 22:51:55  greg
Job: 165
Made review changes

Revision 1.2  2004/08/20 18:20:51  greg
Job: 165
Minor typos

Revision 1.1  2004/08/20 18:18:45  greg
Job: 165
Initial introduction

Revision 1.3  2004/04/23 22:39:04  greg
Job: 195
Update after review

Revision 1.2  2004/04/23 19:37:22  greg
Job: 195
Fix typo

Revision 1.1  2004/04/23 18:10:45  greg
Job: 195
Initial Introduction

